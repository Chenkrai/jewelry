<%- include('layout.ejs'); %>
    <section class="col-sm-4 col-sm-offset-3" style="margin: auto;">
        <h1>
            <span class="fa fa-sign-in"/>
            Signup
        </h1>
        
        <% if ( message.length > 0 ) { %>
            <div class="alert alert-danger">
                <%= message %>
            </div>
        <% } %>
    
        <form action="/register" method="post" onsubmit="return validateCode( this.role ) ">
            <div class="form-group">
                <label>
                    Name
                </label>
                <input type="text" class="form-control" name="name" value="<%= name %>"/> 
            </div>        
            <div class="form-group">
                <label>
                    Email
                </label>
                <input type="text" class="form-control" name="email" value="<%= email %>"/>
            </div>
            <div class="form-group">
                <label>
                    Password
                </label>
                <input type="password" class="form-control" name="password" value="<%= password %>"/>
            </div>
            <div class="form-group">
                <label>
                    Role
                </label>
                <select class="form-control" name="role">
                    <option value="">Choose role</option>
                    <option value="director">Director</option>
                    <option value="seller">Seller</option>
                    <option value="client">Client</option>
                </select>            
            </div>

            <button type="submit" class="btn btn-warning btn-lg">Signup</button>
        </form>
        <hr>
        <p>
            Already have an account? 
            <a href="/login">
                Login
            </a>
        </p>       
    </section> 

</body>
</html>

<script>
    $(document).ready(function () {   
        $("#footer").hide()
    })

    function validateCode ( role ) 
    {
        if ( role.value == "client" )
        {
            return true
        }
        else if ( role.value == "seller" )
        {
            var code = prompt("Please enter your code", "rootSeller")
            if ( code != null ) {
                if ( code == "rootSeller" )
                {
                    return true
                }
                else
                {
                    return false
                }
            }
        }
        else if ( role.value == "director" )
        {
            var code = prompt("Please enter your code", "rootDirector")
            if ( code != null ) {
                if ( code == "rootDirector" )
                {
                    return true
                }
                else
                {
                    return false
                }
            }
        }      
    }
</script>